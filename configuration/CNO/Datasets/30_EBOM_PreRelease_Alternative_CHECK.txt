############################################################################################################
#  CNO Check Definition File
############################################################################################################
# Version History
#
# Version    Date           Name               Description of Change
# 1.0        02-05-2022     testu     Initial
############################################################################################################


#Process and unclear behavior of Teamcenter's customization
#do not check with logic of wf-20: all target inside a single WF:
#C:EPMTask:num_targets§eq§1~Workflow can be start with only one target, [VAL_OBJECT:num_targets] found~1 target
C:EPMTask:num_targets§count lt 2§*~Object is already inside another workflow, list: [C:EPMTask:object_name]~no active Workflow is running


#status of selected object
ID=30Root1;scope=object;CRITERIA=CONDITION;CHECK=root:C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision
#||SR5CatalogPartRevision||SR5GenCatPartRevision||SR5EleCatPartRevision||SR5MechCatPartRevision
ID=30Root1;scope=object;CRITERIA=AND;CHECK=root:C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*~Status is already set to: [VAL_OBJECT:last_release_status]~In work object or with status 20


#Status of children
#original solution
#C:ItemRevision>view:bl_rev_last_release_status§not allowed§70*&&80*&&90*~occurences [VAL_OBJECT:bl_rev_object_string] with status 70 and higher, must be replaced~status is accepted: In Work, 20, 30, 40 or 50
#solution based on second type of extension
#C:SR5GenEngObjRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#but it is a duplicated check for the ccp objects (have a look at end of this dataset) will be clarified by alias
#C:ItemRevision>view:bl_rev_last_release_status§not allowed§70*&&80*&&90*~occurences [VAL_OBJECT:bl_rev_object_string] with status 70 and higher, must be replaced~status is accepted: In Work, 20, 30, 40 or 50
#new need for catalog without status inside a BOM: (scope=occurence;)
#catalog or color or coating or semi-finnished product or they AltRep
ID=30Child3;CRITERIA=CONDITION;CHECK=C:ItemRevision>view:DB_bl_rev_object_type§allowed§SR5GenCatPartRevision||SR5CatalogPartRevision||SR5EleCatPartRevision||SR5MechCatPartRevision||SR5ColorDefRevision||SR5CoatingStructRevision||SR5CatDefArticleRevision||SR5CatDefArtARRevision||SR5GenCatPartARRevision||SR5EngRawArticleRevision
ID=30Child3;CRITERIA=AND;CHECK=C:ItemRevision>view:bl_rev_last_release_status§not allowed§empty&&20*~[VAL_OBJECT:bl_rev_object_type] occurences [VAL_OBJECT:bl_rev_object_string] with smaller status than 30 on level [VAL_OBJECT:level] is not allowed~status of [VAL_OBJECT:bl_rev_object_type] on level [VAL_OBJECT:level] is 30 and higher
#only children (no ccp): child can be of any type but class cannot be used because of ccp link and they alias type
#C:SR5GenEngObjRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#cannot be used because alias is not replacing DB type
#ID=30Child4;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision||SR5EngEndItemRevision||SR5EngMajorAssyRevision||SR5NonERPArticleRevision||SR5GenCatPartRevision||SR5CatalogPartRevision||SR5EleCatPartRevision||SR5MechCatPartRevision||SR5ColorDefRevision
#ID=30Child4;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#not good for SAP check when a previous rev as status 50,70, cannot be improved with the ALIAS somehow
#SR5EngArticleRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#SR5EngEndItemRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#SR5EngMajorAssyRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#SR5NonERPArticleRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#SR5GenCatPartRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#SR5CatalogPartRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#SR5EleCatPartRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#SR5MechCatPartRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
#SR5ColorDefRevision:last_release_status§not allowed§70*&&80*&&90*~objects with status 70 and higher, must be replaced~status of objects is accepted: In Work, 20, 30, 40 or 50
C:ItemRevision>view:bl_rev_last_release_status§not allowed§70*&&80*&&90*~occurences [VAL_OBJECT:bl_rev_object_string] with status 70 and higher, must be replaced on level [VAL_OBJECT:level]~status of occurences on level [VAL_OBJECT:level] is smaller than 70, accepted

#Status of related Doc
#ID=30DocofChild1;scope=object;CRITERIA=CONDITION;CHECK=SR5EngArticleRevision:last_release_status§allowed§empty||20*
##ID=30DocofChild1;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>IMAN_specification>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with specifying relation must have Status 30 or 50 ~Doc with specifying relation have Status 30 or 50 
#ID=30DocofChild1;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>SR5HasSpecificationDocument>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with specifying relation must have Status 30 or 50 ~Doc with specifying relation have Status 30 or 50 

#ID=30DocofChild4;scope=object;CRITERIA=CONDITION;CHECK=SR5EngArticleRevision:last_release_status§allowed§empty||20*
##ID=30DocofChild4;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>IMAN_specification>SR5TechDocument>revision_list>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with specifying relation must have Status 30 or 50 ~Doc with specifying relation have Status 30 or 50 
#ID=30DocofChild4;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>SR5HasSpecificationDocument>SR5TechDocument>revision_list>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with specifying relation must have Status 30 or 50 ~Doc with specifying relation have Status 30 or 50 
ID=30DocofChild4;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision||SR5EngArticleARRevision~needed because of usage of Alias inside the expansion
ID=30DocofChild4;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30DocofChild4;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision>SR5HasSpecificationDocument>SR5TechDocument>revision_list>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with specifying relation must have Status 30 or 50 ~Doc with specifying relation have Status 30 or 50 


#ID=30DocofChild2;scope=object;CRITERIA=CONDITION;CHECK=SR5EngArticleRevision:last_release_status§allowed§empty||20*
##ID=30DocofChild2;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>IMAN_reference>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with referencing relation must have Status 30 or 50 ~Doc with referencing relation have Status 30 or 50 
#ID=30DocofChild2;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>SR5HasRequiredDocument>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with required relation must have Status 30 or 50 ~Doc with required relation have Status 30 or 50 

#ID=30DocofChild3;scope=object;CRITERIA=CONDITION;CHECK=SR5EngArticleRevision:last_release_status§allowed§empty||20*
#ID=30DocofChild3;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>SR5HasRequiredDocument>SR5TechDocument>revision_list>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with required relation must have Status 30 or 50 ~Doc with required relation have Status 30 or 50 
ID=30DocofChild3;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision||SR5EngArticleARRevision~needed because of usage of Alias inside the expansion
ID=30DocofChild3;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30DocofChild3;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision>SR5HasRequiredDocument>SR5TechDocument>revision_list>SR5TechDocumentRevision:last_release_status§allowed§30*||50*~Doc with required relation must have Status 30 or 50 ~Doc with required relation have Status 30 or 50 


#position = BOM sequence
ID=30occ;CRITERIA=CONDITION;CHECK=C:ItemRevision>view:bl_rev_last_release_status§allowed§empty||20*
ID=30occ;CRITERIA=AND;CHECK=C:ItemRevision>view:position_ID_rec_levBylev§eq§count([C:ItemRevision>view:position_rec_levBylev]_*)~Position and ItemID combination is not valid, position used by different ItemIDs~, position used by different ItemIDs~position and ItemID are unique combination


#Q-Checker (of ccp link as well)
ID=30Dataset1;scope=object;CRITERIA=CONDITION;CHECK=C:Dataset:object_type§allowed§CATPart||CATProduct||CATDrawing||CCPRevisionCVPart||CCPRevisionCVAssy||CCPRevisionCVDraw
ID=30Dataset1;scope=object;CRITERIA=CONDITION;CHECK=C:Dataset:last_release_status§allowed§empty||20*
ID=30Dataset1;scope=object;CRITERIA=AND;CHECK=C:Dataset:sr5QCheckEvaluation§not allowed§empty&&KO~WARNING: INFO: Q-Checker Check is missing or KO~Q-Checker Check ok


#find in process
ID=30Child0;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30Child0;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision:fnd0InProcess§not allowed§regex(^[TtWw][RrAa][UuHh][EeRr]$)~Object is already inside another workflow, no WF 30_EBOM_PreRelease will be automatically started on this child~no active Workflow is running


#seleted object
root:C:ItemRevision:DB_Type§allowed§SR5EngArticleRevision~only Eng Article are accepted~Eng Article is accepted
#||SR5CatalogPartRevision||SR5GenCatPartRevision~only Eng Article or Catalog Part are accepted~Eng Article or Catalog Part is accepted


#Group Member for CatalogPart
#ID=30Group1;CRITERIA=CONDITION;CHECK=root:C:SR5GenEngObjRevision:DB_Type§allowed§SR5CatalogPartRevision||SR5GenCatPartRevision||SR5EleCatPartRevision||SR5MechCatPartRevision
#ID=30Group1;CRITERIA=AND;CHECK=GroupMember:group§count gt 0§MDM.Global.Stadler~Only members of MDM group are allowed to set status on Catalog Part~User belongs to MDM Group#
#
#ID=30Group2;CRITERIA=CONDITION;CHECK=root:C:SR5GenEngObjRevision:DB_Type§allowed§SR5CatalogPartRevision||SR5GenCatPartRevision||SR5EleCatPartRevision||SR5MechCatPartRevision
#ID=30Group2;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision:Current Group Name§allowed§MDM.Global.Stadler~WARNING: INFO: you are not logged with MDM~Logged in with MDM group

#Group Member for EngArticle
#MCAD.Engineering.*.Stadler / Designer , Approver
#ID=30Group3;scope=object;CRITERIA=AND;CHECK=root:SR5EngArticleRevision:Current Group Name§allowed§regex(^MCAD\.(Engineering|Konstruktion)\.STA.\.Stadler$)~WARNING: INFO: you are not logged with MCAD.Engineering.*.Stadler group~Logged in with MCAD.Engineering.*.Stadler group
#ID=30Group3;scope=object;CRITERIA=AND;CHECK=root:SR5EngArticleRevision:Current Role Name§allowed§Designer||Konstrukteur||Approver~you are not logged with MCAD.Engineering.*.Stadler / Designer , Approver~Logged in with MCAD.Engineering.*.Stadler / Designer , Approver
#ID=30Group3;scope=object;CRITERIA=AND;CHECK=root:SR5EngArticleRevision:Current Group Name§allowed§regex(^MCAD\.(Engineering|Konstruktion)\.STA.\.Stadler$)~You are not logged with MCAD.Engineering.*.Stadler group~Logged in with MCAD.Engineering.*.Stadler group
ID=30Group3;scope=object;CRITERIA=AND;CHECK=root:SR5EngArticleRevision:Current Group Name§allowed§regex(^MCAD\.(Engineering|Konstruktion)\.Internal\.Stadler$)~You are not logged with MCAD.Engineering.Internal.Stadler group~Logged in with MCAD.Engineering.Internal.Stadler group

#if does not need to be "logged with" but only "belongings to" then change  the expansion and use the following:
#ID=30Group4;CRITERIA=CONDITION;CHECK=root:C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision
#ID=30Group4;CRITERIA=AND;CHECK=GroupMember:group§count gt 0§regex(^MCAD\.(Engineering|Konstruktion)\.STA.\.Stadler$)~Only members of MCAD.Engineering.*.Stadler group are allowed to set status~User belongs to MCAD.Engineering.*.Stadler Group

#ID=30Group5;scope=object;CRITERIA=AND;CHECK=root:SR5EngArticleRevision:Current Role Name§allowed§Approver~WARNING: INFO: you are not logged with Approver role~Logged in with Approver role
ID=30Group5;scope=object;CRITERIA=AND;CHECK=root:SR5EngArticleRevision:Current Role Name§allowed§Approver~You are not logged with Approver role~Logged in with Approver role

#ID=30Group6;CRITERIA=CONDITION;CHECK=root:C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision
#ID=30Group6;CRITERIA=AND;CHECK=GroupMember:role§count gt 0§Approver~Only users with role Approver are allowed to set status 30~User have an Approver role

#ID=30Group7;CRITERIA=CONDITION;CHECK=root:C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision
#ID=30Group7;CRITERIA=AND;CHECK=GroupMember:rolegroup§count gt 0§regex(^Approver___MCAD\.(Engineering|Konstruktion)\.STA.\.Stadler$)~Approver role of MCAD.Engineering.*.Stadler group is required in order to set status 30~User have an Approver role and User belongs to MCAD.Engineering.*.Stadler Group


#SAP
#ID=30Child2;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
#ID=30Child2;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision:object_desc§allowed§empty||regex(^.{1,30}$)~WARNING: INFO: for SAP compatibility purpose the description must be shorter than 30, if longer only the first 30 charaters will be transfer~lenght of description is compatible with SAP limitation

#ID=30ItemofChild1;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30ItemofChild1;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision~needed because of Alias inside the expansion
ID=30ItemofChild1;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30ItemofChild1;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision>items_tag>C:Item:sr5SAPMaterialType§not allowed§empty~Material Type must be filled~Material Type is not empty

#ID=30ItemofChild2;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30ItemofChild2;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision~needed because of Alias inside the expansion
ID=30ItemofChild2;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30ItemofChild2;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision>items_tag>C:Item:sr5SAPMaterialGroup§not allowed§empty~Material Group must be filed~Material Group is not empty

#SAP: uom
#should not be required because starting on Eng Article - based on SSD09
#ID=30ItemofChild3;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision||SR5EngEndItemRevision||SR5EngMajorAssyRevision||SR5EngArticleARRevision
ID=30ItemofChild3;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:DB_Type§allowed§SR5EngArticleRevision||SR5EngArticleARRevision
ID=30ItemofChild3;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30ItemofChild3;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision>items_tag>C:Item:uom_tag§not allowed§empty&& ~unit of measure cannot be empty~unit of measure defined

#SAP: Status of previous rev
#only one back
#ID=30PrevStatus50;scope=object;CRITERIA=CONDITION;CHECK=SR5EngArticleRevision:last_release_status§allowed§empty||20*
#ID=30PrevStatus50;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision:PREV_REV_release_status_list§not allowed§regex(^.*50.*$)~The previous revision of this Eng Article has already been with Status 50 (transfered into SAP)~no previous revision transfered into SAP
#complete list of previous rev
# because of alias inside the expansion this is not called on MMLRevision, ContextualRevision, DWGRevision, MasterOfAltRepRev
ID=30Status50;scope=object;CRITERIA=CONDITION;CHECK=SR5EngArticleRevision:last_release_status§allowed§empty||20*
ID=30Status50;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>items_tag>SR5EngArticle>revision_list>SR5EngArticleRevision:release_status_list§not allowed§regex(^.*50.*$)~A previous revision of this Eng Article has already been with Status 50 (transfered into SAP)~no previous revision transfered into SAP
#ID=30Status50;scope=object;CRITERIA=AND;CHECK=SR5EngArticleRevision>items_tag>SR5EngArticle>revision_list>SAPRevisionStatus50:release_status_list§not allowed§regex(^.*50.*$)~A previous revision of this Eng Article has already been with Status 50 (transfered into SAP)~no previous revision transfered into SAP


#first rev of Catalog Part
#ID=30Root2;scope=object;CRITERIA=CONDITION;CHECK=root:C:SR5GenEngObjRevision:DB_Type§allowed§SR5CatalogPartRevision||SR5GenCatPartRevision||SR5EleCatPartRevision||SR5MechCatPartRevision
#ID=30Root2;scope=object;CRITERIA=AND;CHECK=root:C:SR5GenEngObjRevision:Rev§eq§[VAL_OBJECT:Rev_List]~WARNING: INFO: this is not the first revision of this catalog part~first rev of catalog part


#checked-out
ID=30Dataset2;scope=object;CRITERIA=CONDITION;CHECK=C:Dataset:last_release_status§allowed§empty||20*
ID=30Dataset2;scope=object;CRITERIA=AND;CHECK=C:Dataset:checked_out§not allowed§Y~Object [VAL_OBJECT:object_type] is checked-out~Object [VAL_OBJECT:object_type] is checked_in

ID=30Form1;scope=object;CRITERIA=CONDITION;CHECK=C:Form:last_release_status§allowed§empty||20*
ID=30Form1;scope=object;CRITERIA=AND;CHECK=C:Form:checked_out§not allowed§Y~Object [VAL_OBJECT:object_type] is checked-out~Object [VAL_OBJECT:object_type] is checked_in

ID=30Child1;scope=object;CRITERIA=CONDITION;CHECK=C:SR5GenEngObjRevision:last_release_status§allowed§empty||20*
ID=30Child1;scope=object;CRITERIA=AND;CHECK=C:SR5GenEngObjRevision:checked_out§not allowed§Y~Object [VAL_OBJECT:DB_Type] is checked-out~Object [VAL_OBJECT:DB_Type] is checked_in

ID=30BOMView1;scope=object;CRITERIA=CONDITION;CHECK=C:PSBOMViewRevision:last_release_status§allowed§empty||20*
ID=30BOMView1;scope=object;CRITERIA=AND;CHECK=C:PSBOMViewRevision:checked_out§not allowed§Y~Object [VAL_OBJECT:object_type] is checked-out~Object [VAL_OBJECT:object_type] is checked_in


# ccp linkage 
# MML link
##maybe: only of ALL_MAIN not on related von related: otherwise validation of wie gezeichntes can become problematic
##ID=A;scope=object;CRITERIA=CONDITION;CHECK=
#ID=A;scope=object;CRITERIA=CONDITION;CHECK=CATPart:last_release_status§allowed§empty||20*
##ID=A;scope=object;CRITERIA=AND;CHECK=CATPart>catiaV5_MML>C:ItemRevision:last_release_status§allowed§30*||40*||50*~ccp link is not released yet, released it first (-Roh Teil- or -wie gezeichnetes Teil-)~ccp link ok(-Roh Teil- or -wie gezeichnetes Teil-)
##ID=A;scope=object;CRITERIA=AND;CHECK=CATPart>catiaV5_MML>C:ItemRevision:last_release_status§allowed§30*||40*||50*~WARNING: INFO: ccp link is not released yet, released it first (-Roh Teil- or -wie gezeichnetes Teil-)~ccp link ok(-Roh Teil- or -wie gezeichnetes Teil-)
#ID=A;scope=object;CRITERIA=AND;CHECK=CATPart>catiaV5_MML>C:SR5GenEngObjRevision:last_release_status§not allowed§70*&&80*&&90*~ccp MML link is obsolete (-Roh Teil- or -wie gezeichnetes Teil- or -Original Teil-)~ccp MML link is ok (-Roh Teil- or -wie gezeichnetes Teil- or -Original Teil-)
##kind of duplicate of #Status of children
# MML link
#empty and 20 are ok and must be target
#30-40-50 are filtered out
#70+ are an error
MMLRevision:last_release_status§not allowed§empty&&20*~WARNING: INFO: ccp MML link is not released yet, object will be automatically added to worfklow releasing the reference~no ccp MML link will be automatically added to worfklow releasing the reference
MMLRevision:last_release_status§not allowed§70*&&80*&&90*~ccp MML link obsolete with status 70 and higher, must be replaced (-Roh Teil- or -wie gezeichnetes Teil- or -Original Teil-)~ccp MML link ok: have status smaller than 70 (-Roh Teil- or -wie gezeichnetes Teil- or -Original Teil-)

#ccp: DWG link
##maybe only if it is not itself
##ID=B;scope=object;CRITERIA=CONDITION;CHECK=
#ID=B;scope=object;CRITERIA=CONDITION;CHECK=CATDrawing:last_release_status§allowed§empty||20*
##ID=B;scope=object;CRITERIA=AND;CHECK=CATDrawing>catiaV5_DWGLink>C:ItemRevision:last_release_status§allowed§empty||20*||30*||40*||50*~ccp DWG link obsolete~if ccp DWG link is not released yet, object will be automatically added to worfklow releasing the reference
##ID=B;scope=object;CRITERIA=AND;CHECK=CATDrawing>catiaV5_DWGLink>C:ItemRevision:last_release_status§allowed§empty||20*||30*||40*||50*~WARNING: INFO: ccp DWG link obsolete~if ccp DWG link is not released yet, object will be automatically added to worfklow releasing the reference
#ID=B;scope=object;CRITERIA=AND;CHECK=CATDrawing>catiaV5_DWGLink>C:SR5GenEngObjRevision:last_release_status§not allowed§70*&&80*&&90*~ccp DWG link is obsolete (-link zu 3D- or -link zu 3D 2 Artikelnummern- or -spiegelbildliches Teil-)~ccp DWG link is ok (-link zu 3D- or -link zu 3D 2 Artikelnummern- or -spiegelbildliches Teil-)
##kind of duplicate of #Status of children
# DWG link
#empty and 20 are ok and must be target
#30-40-50 are filtered out
#70+ are an error
DWGRevision:last_release_status§not allowed§empty&&20*~WARNING: INFO: ccp DWG link is not released yet, object will be automatically added to worfklow releasing the reference~no ccp DWG link will be automatically added to worfklow releasing the reference
DWGRevision:last_release_status§not allowed§70*&&80*&&90*~ccp DWG link obsolete with status 70 and higher, must be replaced (-link zu 3D- or -link zu 3D 2 Artkelnummern- or -piegelbildiches Teil-)~ccp DWG link is ok: have status smaller than 70 (-link zu 3D- or -link zu 3D 2 Artkelnummern- or -piegelbildiches Teil-)

#ccp: MMLAssy link
##partial solution for MMLAssy linkage
##ID=C;scope=object;CRITERIA=CONDITION;CHECK=CATPart:last_release_status§allowed§empty||20*
##ID=C;scope=object;CRITERIA=AND;CHECK=CATPart>catiaV5_MMLAssy>C:ItemRevision:last_release_status§allowed§30*||40*||50*~WARNING: INFO: contextual link is not automatically validated, you need to care about it manually (check + proper released sequence)~contextual link ok
#
#ID=C1;scope=related;CRITERIA=CONDITION;CHECK=CATPart>catiaV5_MMLAssy>C:ItemRevision>IMAN_specification>CATProduct:object_type§exist§*
##ID=C1;scope=related;CRITERIA=AND;CHECK=CATPart>catiaV5_MMLAssy>C:ItemRevision:last_release_status§allowed§empty||20*~WARNING: INFO: contextual link to assembly (only 1 level) will be released afterward: first all components~contextual link to assembly (only 1 level) ok
#ID=C1;scope=related;CRITERIA=AND;CHECK=CATPart>catiaV5_MMLAssy>C:ItemRevision:last_release_status§not allowed§70*&&80*&&90*~contextual link to assembly (only 1 level) is obsolete~contextual link to assembly (only 1 level) ok
#
#
#ID=C2;scope=related;CRITERIA=CONDITION;CHECK=CATPart>catiaV5_MMLAssy>C:ItemRevision>IMAN_specification>CATPart:object_type§exist§*
##ID=C2;scope=related;CRITERIA=CONDITION;CHECK=CATPart>catiaV5_MMLAssy>C:ItemRevision:last_release_status§allowed§30*||40*||50*~contextual link to reference is not released yet, released it first~contextual link to reference ok
##ID=C2;scope=related;CRITERIA=CONDITION;CHECK=CATPart>catiaV5_MMLAssy>C:ItemRevision:last_release_status§allowed§30*||40*||50*~WARNING: INFO: contextual link to reference is not released yet, released it first~contextual link to reference ok
#ID=C2;scope=related;CRITERIA=CONDITION;CHECK=CATPart>catiaV5_MMLAssy>C:ItemRevision:last_release_status§not allowed§70*&&80*&&90*~contextual link to reference is obsolete~contextual link to reference ok
# MMLAssy link
ID=C10;scope=object;CRITERIA=CONDITION;CHECK=ContextualRevision>IMAN_specification>C:Dataset:object_type§eq§CATProduct
ID=C10;scope=object;CRITERIA=AND;CHECK=ContextualRevision:last_release_status§allowed§empty&&20*~WARNING: INFO: contextual link to assembly is not released yet~contextual link to assembly have status 30 and higher

ID=C11;scope=object;CRITERIA=CONDITION;CHECK=ContextualRevision>IMAN_specification>C:Dataset:object_type§eq§CATProduct
ID=C11;scope=object;CRITERIA=AND;CHECK=ContextualRevision:last_release_status§not allowed§70*&&80*&&90*~contextual link to assembly is obsolete with status 70 and higher, must be replaced~contextual link to assembly have status smaller than 70

ID=C2;scope=object;CRITERIA=CONDITION;CHECK=ContextualRevision>IMAN_specification>C:Dataset:object_type§eq§CATPart
ID=C2;scope=object;CRITERIA=AND;CHECK=ContextualRevision:last_release_status§not allowed§70*&&80*&&90*~Contextual link to reference is obsolete with status 70 and higher, must be replaced~if contextual link to reference is not released yet, object will be automatically added to worfklow releasing the reference



# selection
root:C:SR5GenEngObjRevision:IR_ID_REV§eq§[ALL_ROOT:C:SR5GenEngObjRevision:IR_ID_REV]~Select only one Object for Validation before WF 30, needed object will automatically be added~only one object selected


#contextual link management
#ID=C12;
root:C:ItemRevision>IMAN_specification>CATPart:catiaV5_MMLAssy§allowed§empty|| ~do not start WF-30 on a Part having a contextual Link~selected object is not one with contextual link

ID=C13;scope=object;CRITERIA=CONDITION;CHECK=ContextualRevision>IMAN_specification>C:Dataset:object_type§eq§CATProduct
ID=C13;scope=object;CRITERIA=AND;CHECK=ContextualRevision:IR_ID_REV§allowed§[ALL_MAIN:C:SR5GenEngObjRevision:IR_ID_REV]~start the WF-30 on smallest context ASSY having this contextual Link [VAL_OBJECT:IR_ID_REV]~selected object is the context of contextual link


#AltRep
SR5EngArticleAR>sr5AltRepList>MasterOfAltRepRev:last_release_status§not allowed§70*&&80*&&90*&&20*&&empty~Master of Alt. Rep. objects with status 70 and higher, must be replaced - Master of Alt. Rep. objects with status lower than 30, must be released~status of Master of Alt. Rep. objects is accepted:  30 or 40 or 50


